<ipojo xmlns:monitor="fr.liglab.adele.cilia.model.runtime">

	<!-- in charge to maintain components discovered at runtime -->
	<component
		classname="fr.liglab.adele.cilia.knowledge.impl.registry.RegistryManager"
		name="ModelRuntime_Core.Registry">
		<provides
			specification="fr.liglab.adele.cilia.knowledge.registry.RuntimeRegistry" />
		<callback transition="validate" method="start" />
		<callback transition="invalidate" method="stop" />
	</component>
	<instance component="ModelRuntime_Core.Registry" />

	<!-- in charge to maintains dynamic properties of components discovered -->
	<component
		classname="fr.liglab.adele.cilia.knowledge.impl.runtime.DynamicPropertiesImpl"
		name="ModelRuntime_Core.NodesRuntime">
		<provides
			specification="fr.liglab.adele.cilia.runtime.DynamicProperties" />
		<requires field="registry" />
		<requires field="publisher" />
		<requires field="ciliaContext" />
		<callback transition="validate" method="start" />
		<callback transition="invalidate" method="stop" />
	</component>
	<instance component="ModelRuntime_Core.NodesRuntime" />

	<!-- in charge to follow  specifications -->
	<component
		classname="fr.liglab.adele.cilia.knowledge.impl.specification.SpecificationImpl"
		name="ModelRuntime_Core.Specifications">
		<requires field="ciliaContext" />
		<requires field="listenerFramework" />
		<requires field="publisher" />
		<provides
			specification="fr.liglab.adele.cilia.knowledge.specification.Application" />
		<callback transition="validate" method="start" />
		<callback transition="invalidate" method="stop" />
	</component>
	<instance component="ModelRuntime_Core.Specifications" />

	<!-- Event bus , Listen event and notify subscribers -->
	<component
		classname="fr.liglab.adele.cilia.knowledge.impl.eventbus.EventListenerImpl"
		name="ModelRuntime_Core.EventListener">
		<properties>
			<property name="cache.capacity" field="capacity" />
		</properties>
		<provides specification="fr.liglab.adele.cilia.knowledge.eventbus.Cache" />
		<provides
			specification="fr.liglab.adele.cilia.knowledge.eventbus.SubscriberRegistration" />
		<provides
			specification="fr.liglab.adele.cilia.knowledge.eventbus.VetoSubscriberRegistration" />
		<requires field="registry" />
		<callback transition="validate" method="start" />
		<callback transition="invalidate" method="stop" />
	</component>
	<instance component="ModelRuntime_Core.EventListener">
		<property name="cache.capacity" value="100" />
	</instance>

	<!-- Private service ,Publisher to the event bus -->
	<component
		classname="fr.liglab.adele.cilia.knowledge.impl.eventbus.EventPublisherImpl"
		name="ModelRuntime_Core.EventPublisher">
		<provides specification="fr.liglab.adele.cilia.knowledge.impl.eventbus.Publisher" />
		<callback transition="validate" method="start" />
		<callback transition="invalidate" method="stop" />
	</component>
	<instance component="ModelRuntime_Core.EventPublisher" />

</ipojo>