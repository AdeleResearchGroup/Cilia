
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at Dec 31, 2013
 Rendered using Reflow Maven Skin 1.0.1-SNAPSHOT (http://andriusvelykis.github.com/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Cilia DSL | iCasa</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />

		<link href="http://netdna.bootstrapcdn.com/bootswatch/2.2.2/spacelab/bootstrap.min.css" rel="stylesheet" />
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="./css/bootswatch.css" rel="stylesheet" />
		<link href="./css/reflow-skin.css" rel="stylesheet" />
		
		<link href="http://yandex.st/highlightjs/7.3/styles/default.min.css" rel="stylesheet" />
		
		<link href="./css/lightbox.css" rel="stylesheet" />
		
		<link href="./css/site.css" rel="stylesheet" />
		<link href="./css/print.css" rel="stylesheet" media="print" />
		
		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		
<link rel="stylesheet" type="text/css" href="./css/site.css"/>
<link rel="stylesheet" type="text/css" href="./css/font-awesome.css"/>
<script type="text/javascript">var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-35847694-2']);
                _gaq.push(['_trackPageview']);

                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();</script>
<script type="text/javascript">$(document).ready(function () {
                $("pre code").parent().addClass("prettyprint");
                prettyPrint();
                });</script>
<link rel="shortcut icon" href="favicon.png"/>
	</head>

	<body class="page-dslcomponent project-cilia-parent-reactor" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="http://github.com/AdeleResearchGroup/Cilia">Cilia on github</a>
					<div class="nav-collapse">
						<ul class="nav pull-right">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Cilia <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="index.html" title="Home">Home </a></li>
									<li><a href="overview.html" title="Overview">Overview </a></li>
									<li><a href="download.html" title="Download">Download </a></li>
									<li><a href="components.html" title="Available components">Available components </a></li>
								</ul>
							</li>
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="quickstart.html" title="Quick start">Quick start </a></li>
									<li class="dropdown-submenu">
										<a href="dslComponent.html#" title="DSL Reference">DSL Reference </a>
										<ul class="dropdown-menu">
											<li class="active"><a href="" title="Component Type specification">Component Type specification </a></li>
											<li><a href="dslCilia.html" title="Chain description">Chain description </a></li>
											<li><a href="cfgCilia.html" title="Chain configuration">Chain configuration </a></li>
										</ul>
									</li>
									<li><a href="rest-api.html" title="REST API">REST API </a></li>
									<li><a href="gogo-commands.html" title="Gogo commands">Gogo commands </a></li>
									<li><a href="apidocs/index.html" title="Javadoc">Javadoc </a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Advanced tutorials <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="linker.html" title="Creating a new Linker">Creating a new Linker </a></li>
									<li><a href="adapter.html" title="Creating new adapter">Creating new adapter </a></li>
									<li><a href="monitor.html" title="Using monitoring capabilities">Using monitoring capabilities </a></li>
									<li><a href="extendDSL.html" title="Extending the DSL Language">Extending the DSL Language </a></li>
									<li class="dropdown-submenu">
										<a href="dslComponent.html#" title="Runtime Manipulation">Runtime Manipulation </a>
										<ul class="dropdown-menu">
											<li><a href="builder.html" title="Cilia Admin Builder Pattern">Cilia Admin Builder Pattern </a></li>
											<li><a href="ciliaAdmin.html" title="Cilia Admin Service">Cilia Admin Service </a></li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>
		
	<div class="container">
	
	<!-- Masthead
	================================================== -->
	<header class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="dslComponent.html#" id="bannerLeft"><img src="cilia-small.png" alt='"'Cilia - A service mediation framework for dynamic applications'"' /></a>
					<p class="lead">A service mediation framework for dynamic applications</p>
				</div>
				<div class="pull-right">
				</div>
			</div>
		</div>
		<hr class="toc-separator" />
		<div id="toc-bar" class="navbar">
			<div class="navbar-inner">
				<div id="toc-scroll-target" class="container">
					<ul id="toc" class="nav">
						<li class="toplevel"><a href="#Cilia_DSL" title="Cilia DSL">Cilia DSL</a></li>
						<li class="divider-vertical"></li>
						<li class="dropdown">
							<a href="#Mediator_and_its_elements" title="Mediator and its elements" class="dropdown-toggle" role="button" data-toggle="dropdown" data-target="#">Mediator and its elements <b class="caret"></b></a>
							<ul class="dropdown-menu" role="menu">
								<!-- Repeat the item, otherwise it is not clickable as the dropdown root -->
								<li><a href="#Mediator_and_its_elements" title="Mediator and its elements">Mediator and its elements</a></li>
								<li class="divider"></li>
								<li class="dropdown-submenu">
									<a href="#Scheduler" title="Scheduler">Scheduler</a>
									<ul class="dropdown-menu" role="menu">
								<li><a href="#Scheduler_example" title="Scheduler example">Scheduler example</a></li>

									</ul>
								</li>
								<li class="dropdown-submenu">
									<a href="#Processor" title="Processor">Processor</a>
									<ul class="dropdown-menu" role="menu">
								<li><a href="#Configuring_processor_method" title="Configuring processor method">Configuring processor method</a></li>
								<li><a href="#Processor_example" title="Processor example">Processor example</a></li>

									</ul>
								</li>
								<li class="dropdown-submenu">
									<a href="#Dispatcher" title="Dispatcher">Dispatcher</a>
									<ul class="dropdown-menu" role="menu">
								<li><a href="#Dispatcher_example" title="Dispatcher example">Dispatcher example</a></li>

									</ul>
								</li>
								<li class="dropdown-submenu">
									<a href="#Adding_properties_to_the_elements" title="Adding properties to the elements">Adding properties to the elements</a>
									<ul class="dropdown-menu" role="menu">
								<li><a href="#Example__Scheduler_with_properties" title="Example : Scheduler with properties">Example : Scheduler with properties</a></li>

									</ul>
								</li>
								<li class="dropdown-submenu">
									<a href="#Mediator_type" title="Mediator type">Mediator type</a>
									<ul class="dropdown-menu" role="menu">
								<li><a href="#Specifying_the_mediators_scheduler" title="Specifying the mediator’s scheduler">Specifying the mediator’s scheduler</a></li>
								<li><a href="#Specifying_the_mediators_processor" title="Specifying the mediator’s processor">Specifying the mediator’s processor</a></li>
								<li><a href="#Specifying_the_mediators_dispatcher" title="Specifying the mediator’s dispatcher">Specifying the mediator’s dispatcher</a></li>
								<li><a href="#Specifying_the_mediators_port" title="Specifying the mediator’s port">Specifying the mediator’s port</a></li>
								<li><a href="#Mediator_example" title="Mediator example">Mediator example</a></li>
								<li class="dropdown-submenu">
									<a href="#Mediator_specification_at_run-time" title="Mediator specification at run-time">Mediator specification at run-time</a>
									<ul class="dropdown-menu" role="menu">
								<li><a href="#Obtaining_CiliaContext_by_using_the_BundleContext" title="Obtaining CiliaContext by using the BundleContext">Obtaining CiliaContext by using the BundleContext</a></li>
								<li><a href="#Obtaining_CiliaContext_by_using_the_iPOJO_or_other_OSGi_service_injector" title="Obtaining CiliaContext by using the iPOJO or other OSGi service injector">Obtaining CiliaContext by using the iPOJO or other OSGi service injector</a></li>
								<li><a href="#Creating_a_Mediator_Specification" title="Creating a Mediator Specification">Creating a Mediator Specification</a></li>

									</ul>
								</li>

									</ul>
								</li>

							</ul>
						</li>
						<li class="divider-vertical"></li>
						<li class="dropdown">
							<a href="#Connectors" title="Connectors" class="dropdown-toggle" role="button" data-toggle="dropdown" data-target="#">Connectors <b class="caret"></b></a>
							<ul class="dropdown-menu" role="menu">
								<!-- Repeat the item, otherwise it is not clickable as the dropdown root -->
								<li><a href="#Connectors" title="Connectors">Connectors</a></li>
								<li class="divider"></li>
								<li><a href="#Inter_Mediation_Communication" title="Inter Mediation Communication">Inter Mediation Communication</a></li>
								<li class="dropdown-submenu">
									<a href="#Adapters" title="Adapters">Adapters</a>
									<ul class="dropdown-menu" role="menu">
								<li class="dropdown-submenu">
									<a href="#In_Adapter" title="In Adapter">In Adapter</a>
									<ul class="dropdown-menu" role="menu">
								<li><a href="#In_Adapter_example" title="In Adapter example">In Adapter example</a></li>

									</ul>
								</li>
								<li class="dropdown-submenu">
									<a href="#Out_Adapter" title="Out Adapter">Out Adapter</a>
									<ul class="dropdown-menu" role="menu">
								<li><a href="#Out_Adapter_example" title="Out Adapter example">Out Adapter example</a></li>

									</ul>
								</li>
								<li><a href="#In-Out_Adapter" title="In-Out Adapter">In-Out Adapter</a></li>
								<li><a href="#Specifying_the_io-adapters_port" title="Specifying the io-adapter’s port">Specifying the io-adapter’s port</a></li>
								<li><a href="#IO-Adapter_example" title="IO-Adapter example">IO-Adapter example</a></li>

									</ul>
								</li>

							</ul>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<div class="section"> 
 <div class="page-header">
  <h2 id="Cilia_DSL">Cilia DSL</h2>
 </div> 
 <p>Cilia is a domain-specific component model, where the domain-specific is mediation applications. Like almost all domain-specific component models, there are special elements that must be specified. In this section is described the language proposed by Cilia to define new components types. The presented Cilia language uses an XML-based syntax</p> 
</div> 
<div class="section"> 
 <h2 id="Mediator_and_its_elements">Mediator and its elements</h2> 
 <p>Mediators are composed by three elements, scheduler, processor and dispatcher.</p> 
 <div class="section"> 
  <h3 id="Scheduler">Scheduler</h3> 
  <p>To create a new scheduler specification, is used the <b><i>scheduler</i></b> tag.</p> 
  <table class="bodyTable table table-striped table-hover" cellpadding="4" cellspacing="0" border="1"> 
   <thead> 
    <tr class="a"> 
     <th>ATTRIBUTE </th> 
     <th>OPTIONAL </th> 
     <th>DEFAULT </th> 
     <th>DESCRIPTION </th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr class="b"> 
     <td>name </td> 
     <td>No </td> 
     <td> </td> 
     <td>Each scheduler must have an associated name. </td> 
    </tr> 
    <tr class="a"> 
     <td>classname </td> 
     <td>No </td> 
     <td> </td> 
     <td>Defines the class name where the scheduler logic is located. </td> 
    </tr> 
    <tr class="b"> 
     <td>namespace </td> 
     <td>Yes </td> 
     <td> fr.liglab.adele.cilia </td> 
     <td>This attribute describes the scheduler namespace. </td> 
    </tr> 
   </tbody> 
  </table> 
  <div class="section"> 
   <h4 id="Scheduler_example">Scheduler example</h4> 
   <p>This scheduler triggers periodically the processing passing to the processor all collected data. The Java class implementing the scheduler logic is <i>org.my.first.scheduler.MyPeriodicScheduler</i>. The scheduler name is MyPeriodicScheduler and it belonging to the fr.liglab.adele.cilia.test namespace.</p> 
   <div class="source"> 
    <pre>   &lt;scheduler name=&quot;MyPeriodicScheduler&quot; namespace=&quot;fr.liglab.adele.cilia.test&quot;
              classname=&quot;org.my.first.scheduler.MyPeriodicScheduler&quot; /&gt;
</pre> 
   </div> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Processor">Processor</h3> 
  <p>To create a new processor specification, is used the <b><i>processor</i></b> tag</p> 
  <table class="bodyTable table table-striped table-hover" cellpadding="4" cellspacing="0" border="1"> 
   <thead> 
    <tr class="a"> 
     <th>ATTRIBUTE </th> 
     <th>OPTIONAL </th> 
     <th>DEFAULT </th> 
     <th>DESCRIPTION </th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr class="b"> 
     <td>name </td> 
     <td>No </td> 
     <td> </td> 
     <td>This attribute describes the processor name </td> 
    </tr> 
    <tr class="a"> 
     <td>classname </td> 
     <td>No </td> 
     <td> </td> 
     <td>This attribute describes the class name where the processor logic is located. </td> 
    </tr> 
    <tr class="b"> 
     <td>namespace </td> 
     <td>Yes </td> 
     <td>fr.liglab.adele.cilia </td> 
     <td>This attribute describes the processor namespace. </td> 
    </tr> 
   </tbody> 
  </table> 
  <div class="section"> 
   <h4 id="Configuring_processor_method">Configuring processor method</h4> 
   <p>To indicate the processor method, a tag called <b><i>method</i></b> must be declared into the processor specification tag.</p> 
   <table class="bodyTable table table-striped table-hover" cellpadding="4" cellspacing="0" border="1"> 
    <thead> 
     <tr class="a"> 
      <th>ATTRIBUTE </th> 
      <th>OPTIONAL </th> 
      <th>DEFAULT </th> 
      <th>DESCRIPTION </th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr class="b"> 
      <td>name </td> 
      <td>Yes </td> 
      <td>process </td> 
      <td>This attribute specifies the processor name. </td> 
     </tr> 
     <tr class="a"> 
      <td>data.type </td> 
      <td>Yes </td> 
      <td>java.util.List </td> 
      <td>This attribute specifies the parameter data type and the returning data type (both must be the same). </td> 
     </tr> 
    </tbody> 
   </table> 
  </div> 
  <div class="section"> 
   <h4 id="Processor_example">Processor example</h4> 
   <p>This processor filters data using a threshold value. The Java class implementing the processor logic is <i>org.my.first.processor.MyFilterProcessor</i>, this class must provide the method <i>filter</i> that receives as parameter (and returns) an object of type <i>fr.liglab.adele.cilia.Data</i>. The processor is called <i>MyFilterProcessor</i> and belonging to the <i>fr.liglab.adele.cilia.test</i> namespace.</p> 
   <div class="source"> 
    <pre>   &lt;processor name=&quot;MyFilterProcessor&quot; namespace=&quot;fr.liglab.adele.cilia.test&quot; 
              classname=&quot;org.my.first.processor.MyFilterProcessor&quot;&gt;
        &lt;method name=&quot;filter&quot; data.type=&quot;fr.liglab.adele.cilia.Data&quot; /&gt;
   &lt;/processor&gt;
</pre> 
   </div> 
   <p>The Java class implementing this processor has a structure as follow:</p> 
   <div class="source"> 
    <pre>package org.my.first.processor;

import fr.liglab.adele.cilia.Data;

public class MyFilterProcessor {

   /**
    * Method to be invoked by the Cilia framework
    * @param dataToProcess
    * @return
    */
   public Data filter(Data dataToProcess) {
      // Processor logig must be defined here 
      ....
   }
   
}
</pre> 
   </div> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Dispatcher">Dispatcher</h3> 
  <p>To create a new dispatcher specification, is used the <b><i>dispatcher</i></b> tag.</p> 
  <table class="bodyTable table table-striped table-hover" cellpadding="4" cellspacing="0" border="1"> 
   <thead> 
    <tr class="a"> 
     <th>ATTRIBUTE </th> 
     <th>OPTIONAL </th> 
     <th>DEFAULT </th> 
     <th>DESCRIPTION </th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr class="b"> 
     <td>name </td> 
     <td>No </td> 
     <td> </td> 
     <td>Each dispatcher must have an associated name. </td> 
    </tr> 
    <tr class="a"> 
     <td>classname </td> 
     <td>No </td> 
     <td> </td> 
     <td>Defines the class name where the dispatcher logic is located. </td> 
    </tr> 
    <tr class="b"> 
     <td>namespace </td> 
     <td>Yes </td> 
     <td> fr.liglab.adele.cilia </td> 
     <td>This attribute describes the dispatcher namespace. </td> 
    </tr> 
   </tbody> 
  </table> 
  <div class="section"> 
   <h4 id="Dispatcher_example">Dispatcher example</h4> 
   <p>This dispatcher will choice the destination based on the received number, odd or even. The Java class implementing the dispatcher logic is <i>org.my.first.dispatcher.MyOddEvenDispatcher</i>. The dispatcher name is <i>MyOddEvenDispatcher</i> and it belonging to the <i>fr.liglab.adele.cilia.test</i> namespace.</p> 
   <div class="source"> 
    <pre>   &lt;dispatcher name=&quot;MyOddEvenDispatcher&quot; namespace=&quot;fr.liglab.adele.cilia.test&quot;
              classname=&quot;org.my.first.dispatcher.MyOddEvenDispatcher&quot; /&gt;
</pre> 
   </div> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Adding_properties_to_the_elements">Adding properties to the elements</h3> 
  <p>To add properties to each of the mediators constituents, a <b><i>Properties</i></b> tag, followed by the needed <b><i>property</i></b> tag is needed.</p> 
  <table class="bodyTable table table-striped table-hover" cellpadding="4" cellspacing="0" border="1"> 
   <thead> 
    <tr class="a"> 
     <th>ATTRIBUTE </th> 
     <th>OPTIONAL </th> 
     <th>DEFAULT </th> 
     <th>DESCRIPTION </th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr class="b"> 
     <td>name </td> 
     <td>No </td> 
     <td> </td> 
     <td>Property name. </td> 
    </tr> 
    <tr class="a"> 
     <td>field </td> 
     <td>No </td> 
     <td> </td> 
     <td>Specifies which field in the class will be configured by the property value. </td> 
    </tr> 
    <tr class="b"> 
     <td>value </td> 
     <td>Yes </td> 
     <td> </td> 
     <td>To specify the default value. </td> 
    </tr> 
   </tbody> 
  </table> 
  <div class="section"> 
   <h4 id="Example__Scheduler_with_properties">Example : Scheduler with properties</h4> 
   <div class="source"> 
    <pre>   &lt;scheduler name=&quot;MyPeriodicScheduler&quot; namespace=&quot;fr.liglab.adele.cilia.test&quot;
              classname=&quot;org.my.first.scheduler.MyPeriodicScheduler&quot; &gt;
      &lt;properties&gt;
         &lt;property name=&quot;period&quot; field=&quot;m_period&quot; value=&quot;10000&quot; /&gt;
      &lt;/properties&gt;
   &lt;/scheduler&gt;
   
</pre> 
   </div> 
   <div class="source"> 
    <pre>package org.my.first.scheduler;
...
public class MyPeriodicScheduler extends CiliaScheduler implements Runnable {
  /**
  *Field injected by the framework.
  */
  private long m_period;
  ...
  /**
  *Method called by the thread.
  */
  public void run() {
     List dataToProcess = new ArrayList(dataList);
     dataList.clear();
     process(dataToProcess);
  }
}
</pre> 
   </div> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Mediator_type">Mediator type</h3> 
  <p>In Cilia, mediators are formed by the composition of the previous elements (scheduler, processor, dispatcher). To define a new mediator is used the <b><i>mediator-component</i></b> tag.</p> 
  <table class="bodyTable table table-striped table-hover" cellpadding="4" cellspacing="0" border="1"> 
   <thead> 
    <tr class="a"> 
     <th>ATTRIBUTE </th> 
     <th>OPTIONAL </th> 
     <th>DEFAULT </th> 
     <th>DESCRIPTION </th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr class="b"> 
     <td>name </td> 
     <td>No </td> 
     <td> </td> 
     <td>Defines the mediator name. </td> 
    </tr> 
    <tr class="a"> 
     <td>namespace </td> 
     <td>Yes </td> 
     <td>fr.liglab.adele.cilia </td> 
     <td>Describes the mediator namespace. </td> 
    </tr> 
    <tr class="b"> 
     <td>category </td> 
     <td>Yes </td> 
     <td>generic </td> 
     <td>Each mediator could have a defined category (<i>e.g.</i> splitter, translator). </td> 
    </tr> 
   </tbody> 
  </table> 
  <div class="section"> 
   <h4 id="Specifying_the_mediators_scheduler">Specifying the mediator’s scheduler</h4> 
   <p>Each mediator must have a scheduler. To define the used scheduler, a <b><i>scheduler</i></b> tag is used. The needed attributes when defying the scheduler are:</p> 
   <table class="bodyTable table table-striped table-hover" cellpadding="4" cellspacing="0" border="1"> 
    <thead> 
     <tr class="a"> 
      <th>ATTRIBUTE </th> 
      <th>OPTIONAL </th> 
      <th>DEFAULT </th> 
      <th>DESCRIPTION </th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr class="b"> 
      <td>name </td> 
      <td>No </td> 
      <td> </td> 
      <td>To specify which scheduler to use. </td> 
     </tr> 
     <tr class="a"> 
      <td>namespace </td> 
      <td>Yes </td> 
      <td> </td> 
      <td>To specify the scheduler namespace to use. </td> 
     </tr> 
    </tbody> 
   </table> 
  </div> 
  <div class="section"> 
   <h4 id="Specifying_the_mediators_processor">Specifying the mediator’s processor</h4> 
   <p>Each mediator must have a processor. To define the used processor, a <b><i>processor</i></b> tag is used. The needed attributes when defying the processor are:</p> 
   <table class="bodyTable table table-striped table-hover" cellpadding="4" cellspacing="0" border="1"> 
    <thead> 
     <tr class="a"> 
      <th>ATTRIBUTE </th> 
      <th>OPTIONAL </th> 
      <th>DEFAULT </th> 
      <th>DESCRIPTION </th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr class="b"> 
      <td>name </td> 
      <td>No </td> 
      <td> </td> 
      <td>To specify which processor to use. </td> 
     </tr> 
     <tr class="a"> 
      <td>namespace </td> 
      <td>Yes </td> 
      <td> </td> 
      <td>To specify the processor namespace to use. </td> 
     </tr> 
    </tbody> 
   </table> 
  </div> 
  <div class="section"> 
   <h4 id="Specifying_the_mediators_dispatcher">Specifying the mediator’s dispatcher</h4> 
   <p>Each mediator must have a dispatcher. To define the used dispatcher, a <b><i>dispatcher</i></b> tag is used. The needed attributes when defying the dispatcher are:</p> 
   <table class="bodyTable table table-striped table-hover" cellpadding="4" cellspacing="0" border="1"> 
    <thead> 
     <tr class="a"> 
      <th>ATTRIBUTE </th> 
      <th>OPTIONAL </th> 
      <th>DEFAULT </th> 
      <th>DESCRIPTION </th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr class="b"> 
      <td>name </td> 
      <td>No </td> 
      <td> </td> 
      <td>To specify which dispatcher to use. </td> 
     </tr> 
     <tr class="a"> 
      <td>namespace </td> 
      <td>Yes </td> 
      <td> </td> 
      <td>To specify the dispatcher namespace to use. </td> 
     </tr> 
    </tbody> 
   </table> 
  </div> 
  <div class="section"> 
   <h4 id="Specifying_the_mediators_port">Specifying the mediator’s port</h4> 
   <p>Each mediator must have a ports for to receive data and ports to deliver the processed data. To define the ports a <b><i>ports</i></b> tag is used. And it contains the <b><i>in-port</i></b> and <b><i>out-port</i></b>. Each in or out port containt the following attributes.</p> 
   <table class="bodyTable table table-striped table-hover" cellpadding="4" cellspacing="0" border="1"> 
    <thead> 
     <tr class="a"> 
      <th>ATTRIBUTE </th> 
      <th>OPTIONAL </th> 
      <th>DEFAULT </th> 
      <th>DESCRIPTION </th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr class="b"> 
      <td>name </td> 
      <td>No </td> 
      <td> </td> 
      <td>The name of the port. </td> 
     </tr> 
     <tr class="a"> 
      <td>type </td> 
      <td>No </td> 
      <td> </td> 
      <td>The data type accepted for that port. </td> 
     </tr> 
    </tbody> 
   </table> 
  </div> 
  <div class="section"> 
   <h4 id="Mediator_example">Mediator example</h4> 
   <div class="source"> 
    <pre>   &lt;mediator-component name=&quot;MyFilterMediator&quot; namespace=&quot;fr.liglab.adele.cilia.test&quot;
              category=&quot;Filter&quot; &gt;
       &lt;scheduler name=&quot;MyPeriodicScheduler&quot; namespace=&quot;fr.liglab.adele.cilia.test&quot;/&gt;
       &lt;processor name=&quot;MyFilterProcessor&quot; namespace=&quot;fr.liglab.adele.cilia.test&quot;/&gt;
       &lt;dispatcher name=&quot;MyOddEvenDispatcher&quot; namespace=&quot;fr.liglab.adele.cilia.test&quot;/&gt;
       &lt;ports&gt;
          &lt;in-port name=&quot;default&quot; type=&quot;string&quot; /&gt;
          &lt;out-port name=&quot;default&quot; type=&quot;string&quot; /&gt;
       &lt;/ports&gt;
   &lt;/mediator-component&gt;
</pre> 
   </div> 
  </div> 
  <div class="section"> 
   <h4 id="Mediator_specification_at_run-time">Mediator specification at run-time</h4> 
   <p>Mediator components could be specified at run-time. First it is necessary to obtain the <i>fr.liglab.adele.cilia.CiliaContext</i> service, there are two ways to obtain it.</p> 
   <div class="section"> 
    <h5 id="Obtaining_CiliaContext_by_using_the_BundleContext">Obtaining CiliaContext by using the BundleContext</h5> 
    <p>To obtain the CiliaContext it is need to obtain first the BundleContext In this <a class="externalLink" href="http://felix.apache.org/site/apache-felix-tutorial-example-1.html">link</a> is presented how obtain the BundleContext using the BundleActivator.</p> 
    <div class="source"> 
     <pre>...
   ServiceReference[] serv = bundleContext.getAllServiceReferences(CiliaContext.class.getName(), (*));
   if (serv != null &amp;&amp; serv.length != 0) {
       ciliaContext = (CiliaContext) bundleContext.getService(serv[0]);
   }
...
</pre> 
    </div> 
   </div> 
   <div class="section"> 
    <h5 id="Obtaining_CiliaContext_by_using_the_iPOJO_or_other_OSGi_service_injector">Obtaining CiliaContext by using the iPOJO or other OSGi service injector</h5> 
    <p>Using <a class="externalLink" href="http://felix.apache.org/site/apache-felix-ipojo.html">iPOJO</a> it is possible to obtain the CiliaContext service.</p> 
    <div class="source"> 
     <pre>...
@Requires
private CiliaContext ciliaContext;
...
</pre> 
    </div> 
    <p>Using <a class="externalLink" href="http://static.springsource.org/osgi/docs/current/reference/html/">Spring DM</a></p> 
    <div class="source"> 
     <pre>...
@ServiceReference
public void setCiliaContext(CiliaContext ccontext) { ... }
...
</pre> 
    </div> 
   </div> 
   <div class="section"> 
    <h5 id="Creating_a_Mediator_Specification">Creating a Mediator Specification</h5> 
    <p>As say previously, mediators are composed by three elements, scheduler, dispatcher and processor. Thus to define new Mediators at run-time there is need of such information.</p> 
    <div class="source"> 
     <pre>...
/* The mediator information*/
String mediatorName = &quot;MyNewMediatorStringSplitter&quot;;
String defaultNamespace = &quot;fr.liglab.adele.cilia&quot;;
String mediatorCategory = &quot;Splitter&quot;;
/*Creating the empty mediator specification*/
MediatorSpecification mtype = ciliaContext.createMediatorSpecification(
                      mediatorName,mediatorNamespace, mediatorCategory);

/* Setting up mediator information*/
mtype.setScheduler(&quot;immediate-scheduler&quot;, defaultNamespace);
mtype.setProcessor(&quot;string-splitter&quot;, defaultNamespace);
mtype.setDispatcher(&quot;content-based-dispatcher&quot;, defaultNamespace);
/*Initializing mediator specification*/
mtype.initializeSpecification();
...
</pre> 
    </div> 
    <p>It is important to notify the framework when we do not need any more the created mediator specification, to do so, it is need to stop it. After stop the specification, there is not possible to create a mediator instance of it.</p> 
    <div class="source"> 
     <pre>...
mtype.stopSpecification();
...
</pre> 
    </div> 
   </div> 
  </div> 
 </div> 
</div> 
<div class="section"> 
 <h2 id="Connectors">Connectors</h2> 
 <p>A Cilia mediation chain is composed by mediation components, and their connections. There are three communication styles in Cilia: inter mediation communication, communication from the chain boundaries, and communication with external services.</p> 
 <div class="section"> 
  <h3 id="Inter_Mediation_Communication">Inter Mediation Communication</h3> 
  <p>In order to communicate two mediation components, Cilia uses the <i>linker</i> pattern. There are some linker components predefined for Cilia (<i>direct, event-admin</i>), but there is possible to extend and build newer ones.</p> 
  <p>The linker is the special component which is in charge to logically bind two mediator instances. At runtime, this binding is performed by other communication components, the one who is in charge to send the message, and the one who is in charge to receive it.</p> 
  <p>So the linker is defined by these two communication components, a <i>collector</i>, and a <i>sender</i></p> 
  <p>The <a class="externalLink" href="http://wikiadele.imag.fr/index.php/Cilia/Developers_Guide/">Advanced developer guide</a> shows how to create new Linkers.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Adapters">Adapters</h3> 
  <p>Adapters are a special type of mediators. They scheduler, processor and dispatcher are defined <i>a priori</i>. And there is not possible to change them. Instead, adapters are defined by its communication component: collector and sender. Or by an specific service specification.</p> 
  <p>There are three adapter patterns:</p> 
  <ul> 
   <li><b><i>In Adapter</i></b>: To receive messages from the chain boundaries (External Applications).</li> 
   <li><b><i>Out Adapter</i></b>: To send messages to the chain boundaries (External Applications).</li> 
   <li><b><i>In-Out Adapter</i></b>: To send messages to the chain and wait for the result.</li> 
  </ul> 
  <p><b>Ports in Adapters</b> are used to bind adapter to another mediation components. So an <b>In Adapter</b> must have an <b>out-port</b> and an <b>Out Adapter</b> must have an <b>in-port</b>. <b>In-Out Adapters</b> must have both.</p> 
  <div class="section"> 
   <h4 id="In_Adapter">In Adapter</h4> 
   <p>The <b><i>In Adapters</i></b> is defined by its collector component.</p> 
   <p>Collectors are the communication components which collect or receives the data. They could receive the data from an external application or from a communication protocol.</p> 
   <p>To create a new collector specification, is used the <b><i>collector</i></b> tag. The attributes associated to collectors are:</p> 
   <table class="bodyTable table table-striped table-hover" cellpadding="4" cellspacing="0" border="1"> 
    <thead> 
     <tr class="a"> 
      <th>ATTRIBUTE </th> 
      <th>OPTIONAL </th> 
      <th>DEFAULT </th> 
      <th>DESCRIPTION </th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr class="b"> 
      <td>name </td> 
      <td>No </td> 
      <td> </td> 
      <td>Each collector must have an associated name. </td> 
     </tr> 
     <tr class="a"> 
      <td>classname </td> 
      <td>No </td> 
      <td> </td> 
      <td>Defines the class name where the collector logic is located. </td> 
     </tr> 
    </tbody> 
   </table> 
   <p>To create a new adapter specification, is used the <b><i>adapter</i></b> tag. The attributes associated to adapters are:</p> 
   <table class="bodyTable table table-striped table-hover" cellpadding="4" cellspacing="0" border="1"> 
    <thead> 
     <tr class="a"> 
      <th>ATTRIBUTE </th> 
      <th>OPTIONAL </th> 
      <th>DEFAULT </th> 
      <th>DESCRIPTION </th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr class="b"> 
      <td>name </td> 
      <td>No </td> 
      <td> </td> 
      <td>Each adapter must have an associated name. </td> 
     </tr> 
     <tr class="a"> 
      <td>namespace </td> 
      <td>Yes </td> 
      <td>fr.liglab.adele.cilia </td> 
      <td>Defines the adapter namespace. </td> 
     </tr> 
     <tr class="b"> 
      <td>pattern </td> 
      <td>No </td> 
      <td> </td> 
      <td>Defines adapter pattern, This adapter must have 'in-only' as pattern. </td> 
     </tr> 
    </tbody> 
   </table> 
   <div class="section"> 
    <h5 id="In_Adapter_example">In Adapter example</h5> 
    <p>This adapter polls the content of the desired file to process it periodically.</p> 
    <div class="source"> 
     <pre>   &lt;collector name=&quot;MyLogFileCollector&quot; 
              classname=&quot;org.my.first.file.collector.MyLogFileCollector&quot; &gt;
      &lt;properties&gt;
         &lt;property name=&quot;filename&quot; field=&quot;m_filename&quot; /&gt;
         &lt;property name=&quot;pool.period&quot; field=&quot;m_period&quot; /&gt;
      &lt;/properties&gt;
   &lt;/collector&gt;
   &lt;adapter name=&quot;file-adapter&quot; pattern=&quot;in-only&quot;&gt;
      &lt;collector type=&quot;MyLogFileCollector&quot;  /&gt;
      &lt;ports&gt;
         &lt;out-port name=&quot;default&quot; type=&quot;string&quot; /&gt;
      &lt;/ports&gt;
   &lt;/adapter&gt;  
</pre> 
    </div> 
    <div class="source"> 
     <pre>package org.my.first.file.collector;
...
public class MyLogFileCollector extends AbstractCollector implements Runnable {
   /**
    * Field injected by the framework, it refers to the ''filename'' property.
    */
   private String m_filename;
   /**
    * Field injected by the framework, it refers to the ''pool.period'' property.
    */
   private String m_period;
   /**
    * Method to be invoked by the thread when collecting data.
    */
   ...
   public void run () {
       Data data = createDataFromFile();
       super.notifyDataArrival(data);
   }
}
</pre> 
    </div> 
   </div> 
  </div> 
  <div class="section"> 
   <h4 id="Out_Adapter">Out Adapter</h4> 
   <p>The <b><i>Out Adapters</i></b> is defined by its sender component. Senders are the communication components which deliver the processed data. They could send the data to an external application or through a communication protocol.</p> 
   <p>To create a new sender specification, is used the <b><i>sender</i></b> tag. The attributes associated to senders are:</p> 
   <table class="bodyTable table table-striped table-hover" cellpadding="4" cellspacing="0" border="1"> 
    <thead> 
     <tr class="a"> 
      <th>ATTRIBUTE </th> 
      <th>OPTIONAL </th> 
      <th>DEFAULT </th> 
      <th>DESCRIPTION </th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr class="b"> 
      <td>name </td> 
      <td>No </td> 
      <td> </td> 
      <td>Each sender must have an associated name. </td> 
     </tr> 
     <tr class="a"> 
      <td>classname </td> 
      <td>No </td> 
      <td> </td> 
      <td>Defines the class name where the sender logic is located. </td> 
     </tr> 
    </tbody> 
   </table> 
   <p>To create a new adapter specification, is used the adapter tag.</p> 
   <p>The attributes associated to adapters are:</p> 
   <table class="bodyTable table table-striped table-hover" cellpadding="4" cellspacing="0" border="1"> 
    <thead> 
     <tr class="a"> 
      <th>ATTRIBUTE </th> 
      <th>OPTIONAL </th> 
      <th>DEFAULT </th> 
      <th>DESCRIPTION </th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr class="b"> 
      <td>name </td> 
      <td>No </td> 
      <td> </td> 
      <td>Each adapter must have an associated name. </td> 
     </tr> 
     <tr class="a"> 
      <td>namespace </td> 
      <td>Yes </td> 
      <td>fr.liglab.adele.cilia </td> 
      <td>Defines the adapter namespace. </td> 
     </tr> 
     <tr class="b"> 
      <td>pattern </td> 
      <td>No </td> 
      <td> </td> 
      <td>Defines adapter pattern, This adapter must have 'out-only' as pattern. </td> 
     </tr> 
    </tbody> 
   </table> 
   <div class="section"> 
    <h5 id="Out_Adapter_example">Out Adapter example</h5> 
    <p>This sender stock the processed data to a file.</p> 
    <div class="source"> 
     <pre>   &lt;sender name=&quot;MyLogFileSender&quot; 
              classname=&quot;org.my.first.file.sender.MyLogFileSender&quot; &gt;
      &lt;properties&gt;
         &lt;property name=&quot;filename&quot; field=&quot;m_filename&quot; /&gt;
      &lt;/properties&gt;
   &lt;/sender&gt;
   &lt;adapter name=&quot;file-out-adapter&quot; pattern=&quot;out-only&quot;&gt;
      &lt;sender type=&quot;MyLogFileSender&quot; /&gt;
      &lt;ports&gt;
         &lt;in-port name=&quot;default&quot; type=&quot;string&quot; /&gt;
      &lt;/ports&gt;
    &lt;/adapter&gt;
</pre> 
    </div> 
    <div class="source"> 
     <pre>package org.my.first.file.sender;
...
public class MyLogFileSender implements ISender  {
   /**
    * Field injected by the framework, it refers to the ''filename'' property.
    */
   private String m_filename;
   /**
    * Method to be invoked by the Cilia framework.
    * @param data the processed data.
    * @return True if the data has been sent, false if not.
    */
   public boolean send (Data data) {
   //Stock the received data to the file specified in the m_filename field.
   }
}
</pre> 
    </div> 
   </div> 
  </div> 
  <div class="section"> 
   <h4 id="In-Out_Adapter">In-Out Adapter</h4> 
   <p>There is only one synchronous implementation of an IO-Adapter, it will block until the reponse is achieved or a time-out is triggered. See <a class="externalLink" href="https://github.com/AdeleResearchGroup/Cilia/blob/master/examples/hello-world-example-annotations/hello-mediator/src/main/java/hello/world/example/adapters/GuiAdapter.java">https://github.com/AdeleResearchGroup/Cilia/blob/master/examples/hello-world-example-annotations/hello-mediator/src/main/java/hello/world/example/adapters/GuiAdapter.java</a> for an example.</p> 
   <p>To create a new IO-Adapter specification, is used the <b><i>io-adapter</i></b> tag.</p> 
   <table class="bodyTable table table-striped table-hover" cellpadding="4" cellspacing="0" border="1"> 
    <thead> 
     <tr class="a"> 
      <th>ATTRIBUTE </th> 
      <th>OPTIONAL </th> 
      <th>DEFAULT </th> 
      <th>DESCRIPTION </th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr class="b"> 
      <td>name </td> 
      <td>No </td> 
      <td> </td> 
      <td>Each io-adapter must have an associated name. </td> 
     </tr> 
     <tr class="a"> 
      <td>classname </td> 
      <td>No </td> 
      <td> </td> 
      <td>Defines the class name where the adapter logic is located. </td> 
     </tr> 
     <tr class="b"> 
      <td>namespace </td> 
      <td>Yes </td> 
      <td> fr.liglab.adele.cilia </td> 
      <td>This attribute describes the adapter namespace. </td> 
     </tr> 
    </tbody> 
   </table> 
  </div> 
  <div class="section"> 
   <h4 id="Specifying_the_io-adapters_port">Specifying the io-adapter’s port</h4> 
   <p>Each io-adapter must have at least one port to receive data and one port to deliver the data. To define the ports a <b><i>ports</i></b> tag is used. And it contains the <b><i>in-port</i></b> and <b><i>out-port</i></b>. Each in or out port containt the following attributes.</p> 
   <table class="bodyTable table table-striped table-hover" cellpadding="4" cellspacing="0" border="1"> 
    <thead> 
     <tr class="a"> 
      <th>ATTRIBUTE </th> 
      <th>OPTIONAL </th> 
      <th>DEFAULT </th> 
      <th>DESCRIPTION </th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr class="b"> 
      <td>name </td> 
      <td>No </td> 
      <td> </td> 
      <td>The name of the port. </td> 
     </tr> 
     <tr class="a"> 
      <td>type </td> 
      <td>No </td> 
      <td> </td> 
      <td>The data type accepted for that port. </td> 
     </tr> 
    </tbody> 
   </table> 
  </div> 
  <div class="section"> 
   <h4 id="IO-Adapter_example">IO-Adapter example</h4> 
   <div class="source"> 
    <pre>   &lt;io-adapter classname=&quot;org.my.first.io.adapter.GuiAdapter&quot;
                name=&quot;gui-adapter&quot;&gt;
                &lt;ports&gt;
                        &lt;in-port name=&quot;in&quot; type=&quot;*&quot; /&gt;
                        &lt;out-port name=&quot;out&quot; type=&quot;*&quot; /&gt;
                &lt;/ports&gt;
        &lt;/io-adapter&gt;
</pre> 
   </div> 
   <p>To create the only (blocking-)implementation of the io-adapter the class must inherit the abstract class <b>fr.liglab.adele.cilia.framework.AbstractIOAdapter</b> as follows:</p> 
   <div class="source"> 
    <pre>package org.my.first.io.adapter;
...
public class GuiAdapter extends AbstractIOAdapter {

        public void adaptionCode(){
            ...
            Data result = null;
            try {
                result = invokeChain(data); //wait some time for the result.
            } catch (TimeoutException e1) {
                e1.printStackTrace();
            }
            ...
        }

        @Override
        public void receiveData(Data data){
                super.receiveData(data);
        }
        @Override
        public Data dispatchData(Data data) {
                return super.dispatchData(data);
        }
}
</pre> 
   </div> 
   <p>One restriction due to the inheritance problems of iPOJO, is that the new adapter class must override the receiveData and dispatchData as presented in the example.</p> 
  </div> 
 </div> 
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->
	
	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span9 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Cilia</li>
						<li>
							<a href="index.html" title="Home">Home </a>
						</li>
						<li>
							<a href="overview.html" title="Overview">Overview </a>
						</li>
						<li>
							<a href="download.html" title="Download">Download </a>
						</li>
						<li>
							<a href="components.html" title="Available components">Available components </a>
						</li>
						<li class="nav-header">Documentation</li>
						<li>
							<a href="quickstart.html" title="Quick start">Quick start </a>
						</li>
						<li>
							<a href="dslComponent.html#" title="DSL Reference">DSL Reference <i class="icon-chevron-down"></i></a>
							<ul class="nav nav-list">
						<li class="active">
							<a href="#" title="Component Type specification">Component Type specification </a>
						</li>
						<li>
							<a href="dslCilia.html" title="Chain description">Chain description </a>
						</li>
						<li>
							<a href="cfgCilia.html" title="Chain configuration">Chain configuration </a>
						</li>
							</ul>
						</li>
						<li>
							<a href="rest-api.html" title="REST API">REST API </a>
						</li>
						<li>
							<a href="gogo-commands.html" title="Gogo commands">Gogo commands </a>
						</li>
						<li>
							<a href="apidocs/index.html" title="Javadoc">Javadoc </a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-description">
					<blockquote>A service mediation framework for dynamic applications.</blockquote>
				</div>
			</div>
		</div>
	</footer>
		
	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2012-2013 <a href="http://adele.imag.fr">Adele Team | LIG</a>. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 1.7.4-SNAPSHOT. </span><span class="publishDate">Last Published: 2013-12-31. </span></p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->

	<!-- Fallback jQuery loading from Google CDN:
	     http://stackoverflow.com/questions/1014203/best-way-to-use-googles-hosted-jquery-but-fall-back-to-my-hosted-library-on-go -->
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script type="text/javascript">
		if (typeof jQuery == 'undefined')
		{
			document.write(unescape("%3Cscript src='./js/jquery-1.8.3.min.js' type='text/javascript'%3E%3C/script%3E"));
		}
	</script>
	
	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
	<script src="./js/lightbox.js"></script>
	<script src="./js/jquery.smooth-scroll.min.js"></script>
	<!-- back button support for smooth scroll -->
	<script src="./js/jquery.ba-bbq.min.js"></script>
	<script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>

	<script src="./js/reflow-skin.js"></script>
	
	</body>
</html>
